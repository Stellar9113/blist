import{r as e,c as a,e as s,f as l,a3 as r,a4 as u,Q as t,k as o,aa as d,ab as n,P as c,B as m,j as p,u as i,ac as f,J as _,i as v}from"./vendor-CRD7CLCO.js";import{_ as b,u as g,i as h}from"./index-WwQmHM_O.js";const w={class:"login-container"},y=b({__name:"login",setup(b){const y=i(),k=g(),V=e({username:"",password:""}),x={username:[{required:!0,message:"请输入用户名",type:"error"}],password:[{required:!0,message:"请输入密码",type:"error"}]},j=async({validateResult:e})=>{if(!0===e)try{const{data:e}=await h.post("/api/users/login",V.value);k.token=e.token,k.user=e.user,_.success("登录成功"),y.push("/home")}catch(a){console.log(a),_.error(a.error||"登录失败")}};return(e,i)=>{const _=t,b=u,g=m,h=c,k=r,q=f;return v(),a("div",w,[s(q,{class:"login-card"},{header:l((()=>i[3]||(i[3]=[]))),default:l((()=>[s(k,{ref:"form",data:V.value,rules:x,onSubmit:j,labelAlign:"top"},{default:l((()=>[s(b,{label:"用户名",name:"username"},{default:l((()=>[s(_,{modelValue:V.value.username,"onUpdate:modelValue":i[0]||(i[0]=e=>V.value.username=e),placeholder:"请输入用户名",status:V.value.username?"success":"default"},{"prefix-icon":l((()=>[s(o(d))])),_:1},8,["modelValue","status"])])),_:1}),s(b,{label:"密码",name:"password"},{default:l((()=>[s(_,{modelValue:V.value.password,"onUpdate:modelValue":i[1]||(i[1]=e=>V.value.password=e),type:"password",placeholder:"请输入密码",status:V.value.password?"success":"default"},{"prefix-icon":l((()=>[s(o(n))])),_:1},8,["modelValue","status"])])),_:1}),s(b,null,{default:l((()=>[s(h,null,{default:l((()=>[s(g,{theme:"primary",type:"submit",block:""},{default:l((()=>i[4]||(i[4]=[p("登录")]))),_:1,__:[4]}),s(g,{theme:"default",onClick:i[2]||(i[2]=e=>o(y).push("/register")),block:""},{default:l((()=>i[5]||(i[5]=[p("注册")]))),_:1,__:[5]})])),_:1})])),_:1})])),_:1},8,["data"])])),_:1})])}}},[["__scopeId","data-v-b999ac55"]]);export{y as default};
