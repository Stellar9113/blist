import{r as e,c as a,e as s,f as l,a3 as r,a4 as u,Q as t,k as o,ad as d,ae as m,ab as i,P as n,B as c,j as p,ac as f,J as _,u as v,i as b}from"./vendor-CRD7CLCO.js";import{_ as g,u as h,i as V}from"./index-WwQmHM_O.js";const w={class:"register-container"},y=g({__name:"register",setup(g){const y=v(),k=h(),x=e({username:"",email:"",password:""}),j={username:[{required:!0,message:"请输入用户名",type:"error"}],email:[{required:!0,message:"请输入邮箱",type:"error"}],password:[{required:!0,message:"请输入密码",type:"error"}]},q=async({validateResult:e})=>{if(!0===e)try{const{data:e}=await V.post("/api/users/register",x.value);k.token=e.token,k.user=e.user,_.success("注册成功"),y.push("/")}catch(a){_.error(a.error||"注册失败")}},U=()=>{y.push("/login")};return(e,_)=>{const v=t,g=u,h=c,V=n,y=r,k=f;return b(),a("div",w,[s(k,{class:"register-card"},{header:l((()=>_[3]||(_[3]=[]))),default:l((()=>[s(y,{ref:"form",data:x.value,rules:j,onSubmit:q,labelAlign:"top"},{default:l((()=>[s(g,{label:"用户名",name:"username"},{default:l((()=>[s(v,{modelValue:x.value.username,"onUpdate:modelValue":_[0]||(_[0]=e=>x.value.username=e),placeholder:"请输入用户名",status:x.value.username?"success":"default"},{"prefix-icon":l((()=>[s(o(d))])),_:1},8,["modelValue","status"])])),_:1}),s(g,{label:"邮箱",name:"email"},{default:l((()=>[s(v,{modelValue:x.value.email,"onUpdate:modelValue":_[1]||(_[1]=e=>x.value.email=e),placeholder:"请输入邮箱",status:x.value.email?"success":"default"},{"prefix-icon":l((()=>[s(o(m))])),_:1},8,["modelValue","status"])])),_:1}),s(g,{label:"密码",name:"password"},{default:l((()=>[s(v,{modelValue:x.value.password,"onUpdate:modelValue":_[2]||(_[2]=e=>x.value.password=e),type:"password",placeholder:"请输入密码",status:x.value.password?"success":"default"},{"prefix-icon":l((()=>[s(o(i))])),_:1},8,["modelValue","status"])])),_:1}),s(g,null,{default:l((()=>[s(V,null,{default:l((()=>[s(h,{theme:"primary",type:"submit",block:""},{default:l((()=>_[4]||(_[4]=[p("注册")]))),_:1,__:[4]}),s(h,{theme:"default",onClick:U,block:""},{default:l((()=>_[5]||(_[5]=[p("返回登录")]))),_:1,__:[5]})])),_:1})])),_:1})])),_:1},8,["data"])])),_:1})])}}},[["__scopeId","data-v-2efcf9b3"]]);export{y as default};
